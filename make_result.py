import ROOT as r
infile = r.TFile.Open('./results/tth_fit.root')

####### get histos
h_alpha_exp     = infile.Get('alpha_exp_STAT'   )
h_alpha_stat    = infile.Get('alpha_val_STAT'   )
h_alpha_staterr = infile.Get('alpha_err_STAT'   )
h_alpha_SCALEup = infile.Get('alpha_val_SCALEup')
h_alpha_SCALEdo = infile.Get('alpha_val_SCALEdo')
h_alpha_SHAPECR = infile.Get('alpha_val_SHAPECR')
h_alpha_FITSRnorm0up  = infile.Get('alpha_val_FITSRnorm0up')
h_alpha_FITSRnorm0do  = infile.Get('alpha_val_FITSRnorm0do')
h_alpha_FITSRnorm5up  = infile.Get('alpha_val_FITSRnorm5up')
h_alpha_FITSRnorm5do  = infile.Get('alpha_val_FITSRnorm5do')
h_alpha_FITSRnorm10up = infile.Get('alpha_val_FITSRnorm10up')
h_alpha_FITSRnorm10do = infile.Get('alpha_val_FITSRnorm10do')
h_alpha_FITSRnorm15up = infile.Get('alpha_val_FITSRnorm15up')
h_alpha_FITSRnorm15do = infile.Get('alpha_val_FITSRnorm15do')
h_alpha_FITSRnorm20up = infile.Get('alpha_val_FITSRnorm20up')
h_alpha_FITSRnorm20do = infile.Get('alpha_val_FITSRnorm20do')
h_alpha_FITSRnorm25up = infile.Get('alpha_val_FITSRnorm25up')
h_alpha_FITSRnorm25do = infile.Get('alpha_val_FITSRnorm25do')
h_alpha_FITSRnorm30up = infile.Get('alpha_val_FITSRnorm30up')
h_alpha_FITSRnorm30do = infile.Get('alpha_val_FITSRnorm30do')
h_alpha_FITSR0up  = infile.Get('alpha_val_FITSR0up')
h_alpha_FITSR0do  = infile.Get('alpha_val_FITSR0do')
h_alpha_FITSR5up  = infile.Get('alpha_val_FITSR5up')
h_alpha_FITSR5do  = infile.Get('alpha_val_FITSR5do')
h_alpha_FITSR10up = infile.Get('alpha_val_FITSR10up')
h_alpha_FITSR10do = infile.Get('alpha_val_FITSR10do')
h_alpha_FITSR15up = infile.Get('alpha_val_FITSR15up')
h_alpha_FITSR15do = infile.Get('alpha_val_FITSR15do')
h_alpha_FITSR20up = infile.Get('alpha_val_FITSR20up')
h_alpha_FITSR20do = infile.Get('alpha_val_FITSR20do')
h_alpha_FITSR25up = infile.Get('alpha_val_FITSR25up')
h_alpha_FITSR25do = infile.Get('alpha_val_FITSR25do')
h_alpha_FITSR30up = infile.Get('alpha_val_FITSR30up')
h_alpha_FITSR30do = infile.Get('alpha_val_FITSR30do')
h_alpha_SHIFT5SRup = infile.Get('alpha_val_SHIFT5SRup')
h_alpha_SHIFT5SRdo = infile.Get('alpha_val_SHIFT5SRdo')
h_alpha_SHIFT4SRup = infile.Get('alpha_val_SHIFT4SRup')
h_alpha_SHIFT4SRdo = infile.Get('alpha_val_SHIFT4SRdo')
h_alpha_SHIFT3SRup = infile.Get('alpha_val_SHIFT3SRup')
h_alpha_SHIFT3SRdo = infile.Get('alpha_val_SHIFT3SRdo')
h_alpha_SHIFT2SRup = infile.Get('alpha_val_SHIFT2SRup')
h_alpha_SHIFT2SRdo = infile.Get('alpha_val_SHIFT2SRdo')
h_alpha_SHIFT1SRup = infile.Get('alpha_val_SHIFT1SRup')
h_alpha_SHIFT1SRdo = infile.Get('alpha_val_SHIFT1SRdo')

####### compute numbers
exp           = h_alpha_exp.GetMean()
alpha         = h_alpha_stat.GetMean()
alpha_stat    = h_alpha_staterr.GetMean()
alpha_scaleup = h_alpha_SCALEup.GetMean()
alpha_scaledo = h_alpha_SCALEdo.GetMean()
alpha_shapecr = h_alpha_SHAPECR.GetMean()
alpha_fitsrnorm0up  = h_alpha_FITSRnorm0up.GetMean()
alpha_fitsrnorm0do  = h_alpha_FITSRnorm0do.GetMean()
alpha_fitsrnorm5up  = h_alpha_FITSRnorm5up.GetMean()
alpha_fitsrnorm5do  = h_alpha_FITSRnorm5do.GetMean()
alpha_fitsrnorm10up = h_alpha_FITSRnorm10up.GetMean()
alpha_fitsrnorm10do = h_alpha_FITSRnorm10do.GetMean()
alpha_fitsrnorm15up = h_alpha_FITSRnorm15up.GetMean()
alpha_fitsrnorm15do = h_alpha_FITSRnorm15do.GetMean()
alpha_fitsrnorm20up = h_alpha_FITSRnorm20up.GetMean()
alpha_fitsrnorm20do = h_alpha_FITSRnorm20do.GetMean()
alpha_fitsrnorm25up = h_alpha_FITSRnorm25up.GetMean()
alpha_fitsrnorm25do = h_alpha_FITSRnorm25do.GetMean()
alpha_fitsrnorm30up = h_alpha_FITSRnorm30up.GetMean()
alpha_fitsrnorm30do = h_alpha_FITSRnorm30do.GetMean()
alpha_fitsr0up  = h_alpha_FITSR0up.GetMean()
alpha_fitsr0do  = h_alpha_FITSR0do.GetMean()
alpha_fitsr5up  = h_alpha_FITSR5up.GetMean()
alpha_fitsr5do  = h_alpha_FITSR5do.GetMean()
alpha_fitsr10up = h_alpha_FITSR10up.GetMean()
alpha_fitsr10do = h_alpha_FITSR10do.GetMean()
alpha_fitsr15up = h_alpha_FITSR15up.GetMean()
alpha_fitsr15do = h_alpha_FITSR15do.GetMean()
alpha_fitsr20up = h_alpha_FITSR20up.GetMean()
alpha_fitsr20do = h_alpha_FITSR20do.GetMean()
alpha_fitsr25up = h_alpha_FITSR25up.GetMean()
alpha_fitsr25do = h_alpha_FITSR25do.GetMean()
alpha_fitsr30up = h_alpha_FITSR30up.GetMean()
alpha_fitsr30do = h_alpha_FITSR30do.GetMean()
alpha_shift5srup = h_alpha_SHIFT5SRup.GetMean()
alpha_shift5srdo = h_alpha_SHIFT5SRdo.GetMean()
alpha_shift4srup = h_alpha_SHIFT4SRup.GetMean()
alpha_shift4srdo = h_alpha_SHIFT4SRdo.GetMean()
alpha_shift3srup = h_alpha_SHIFT3SRup.GetMean()
alpha_shift3srdo = h_alpha_SHIFT3SRdo.GetMean()
alpha_shift2srup = h_alpha_SHIFT2SRup.GetMean()
alpha_shift2srdo = h_alpha_SHIFT2SRdo.GetMean()
alpha_shift1srup = h_alpha_SHIFT1SRup.GetMean()
alpha_shift1srdo = h_alpha_SHIFT1SRdo.GetMean()
#
err_stat          = 100.*alpha_stat/alpha
err_scaleup       = 100.*(alpha_scaleup-alpha)/alpha
err_scaledo       = 100.*(alpha_scaledo-alpha)/alpha
err_shapecr       = 100.*(alpha_shapecr-alpha)/alpha
err_fitsrnorm0up  = 100.*(alpha_fitsrnorm0up-alpha)/alpha
err_fitsrnorm0do  = 100.*(alpha_fitsrnorm0do-alpha)/alpha
err_fitsrnorm5up  = 100.*(alpha_fitsrnorm5up-alpha)/alpha
err_fitsrnorm5do  = 100.*(alpha_fitsrnorm5do-alpha)/alpha
err_fitsrnorm10up = 100.*(alpha_fitsrnorm10up-alpha)/alpha
err_fitsrnorm10do = 100.*(alpha_fitsrnorm10do-alpha)/alpha
err_fitsrnorm15up = 100.*(alpha_fitsrnorm15up-alpha)/alpha
err_fitsrnorm15do = 100.*(alpha_fitsrnorm15do-alpha)/alpha
err_fitsrnorm20up = 100.*(alpha_fitsrnorm20up-alpha)/alpha
err_fitsrnorm20do = 100.*(alpha_fitsrnorm20do-alpha)/alpha
err_fitsrnorm25up = 100.*(alpha_fitsrnorm25up-alpha)/alpha
err_fitsrnorm25do = 100.*(alpha_fitsrnorm25do-alpha)/alpha
err_fitsrnorm30up = 100.*(alpha_fitsrnorm30up-alpha)/alpha
err_fitsrnorm30do = 100.*(alpha_fitsrnorm30do-alpha)/alpha
err_fitsr0up      = 100.*(alpha_fitsr0up-alpha)/alpha
err_fitsr0do      = 100.*(alpha_fitsr0do-alpha)/alpha
err_fitsr5up      = 100.*(alpha_fitsr5up-alpha)/alpha
err_fitsr5do      = 100.*(alpha_fitsr5do-alpha)/alpha
err_fitsr10up     = 100.*(alpha_fitsr10up-alpha)/alpha
err_fitsr10do     = 100.*(alpha_fitsr10do-alpha)/alpha
err_fitsr15up     = 100.*(alpha_fitsr15up-alpha)/alpha
err_fitsr15do     = 100.*(alpha_fitsr15do-alpha)/alpha
err_fitsr20up     = 100.*(alpha_fitsr20up-alpha)/alpha
err_fitsr20do     = 100.*(alpha_fitsr20do-alpha)/alpha
err_fitsr25up     = 100.*(alpha_fitsr25up-alpha)/alpha
err_fitsr25do     = 100.*(alpha_fitsr25do-alpha)/alpha
err_fitsr30up     = 100.*(alpha_fitsr30up-alpha)/alpha
err_fitsr30do     = 100.*(alpha_fitsr30do-alpha)/alpha
err_shift5srup    = 100.*(alpha_shift5srup-alpha)/alpha
err_shift5srdo    = 100.*(alpha_shift5srdo-alpha)/alpha
err_shift4srup    = 100.*(alpha_shift4srup-alpha)/alpha
err_shift4srdo    = 100.*(alpha_shift4srdo-alpha)/alpha
err_shift3srup    = 100.*(alpha_shift3srup-alpha)/alpha
err_shift3srdo    = 100.*(alpha_shift3srdo-alpha)/alpha
err_shift2srup    = 100.*(alpha_shift2srup-alpha)/alpha
err_shift2srdo    = 100.*(alpha_shift2srdo-alpha)/alpha
err_shift1srup    = 100.*(alpha_shift1srup-alpha)/alpha
err_shift1srdo    = 100.*(alpha_shift1srdo-alpha)/alpha

####### print them
my_round=2
print "alpha =",round(alpha,my_round),"(expect from yields=",round(exp,2),")"
print "STAT err =",round(err_stat,my_round),"%"
print "BKG SCALE (10%) err = ",round(err_scaleup,my_round),",",round(err_scaledo,my_round),"%"
print "BKG SHAPE (from CR) err = ",round(err_shapecr,my_round),"%"
print "BKG SHAPE (from SR FIT 0% line)  err =",round(err_fitsr0up,my_round), ",",round(err_fitsr0do,my_round), "%"
print "BKG SHAPE (from SR FIT 5% line)  err =",round(err_fitsr5up,my_round), ",",round(err_fitsr5do,my_round), "%"
print "BKG SHAPE (from SR FIT 10% line) err =",round(err_fitsr10up,my_round),",",round(err_fitsr10do,my_round),"%"
print "BKG SHAPE (from SR FIT 15% line) err =",round(err_fitsr15up,my_round),",",round(err_fitsr15do,my_round),"%"
print "BKG SHAPE (from SR FIT 20% line) err =",round(err_fitsr20up,my_round),",",round(err_fitsr20do,my_round),"%"
print "BKG SHAPE (from SR FIT 25% line) err =",round(err_fitsr25up,my_round),",",round(err_fitsr25do,my_round),"%"
print "BKG SHAPE (from SR FIT 30% line) err =",round(err_fitsr30up,my_round),",",round(err_fitsr30do,my_round),"%"
print "BKG SHAPE (from SR FIT 0% line  + norm) err =",round(err_fitsrnorm0up ,my_round),",",round(err_fitsrnorm0do ,my_round),"%"
print "BKG SHAPE (from SR FIT 5% line  + norm) err =",round(err_fitsrnorm5up ,my_round),",",round(err_fitsrnorm5do ,my_round),"%"
print "BKG SHAPE (from SR FIT 10% line + norm) err =",round(err_fitsrnorm10up,my_round),",",round(err_fitsrnorm10do,my_round),"%"
print "BKG SHAPE (from SR FIT 15% line + norm) err =",round(err_fitsrnorm15up,my_round),",",round(err_fitsrnorm15do,my_round),"%"
print "BKG SHAPE (from SR FIT 20% line + norm) err =",round(err_fitsrnorm20up,my_round),",",round(err_fitsrnorm20do,my_round),"%"
print "BKG SHAPE (from SR FIT 25% line + norm) err =",round(err_fitsrnorm25up,my_round),",",round(err_fitsrnorm25do,my_round),"%"
print "BKG SHAPE (from SR FIT 30% line + norm) err =",round(err_fitsrnorm30up,my_round),",",round(err_fitsrnorm30do,my_round),"%"
nbins=150.
bin_width=(300.-0.)/nbins
print "BKG SHIFT (from SR FIT,",round(5.*bin_width),"GeV) err =",round(err_shift5srup,my_round),",",round(err_shift5srdo,my_round),"%"
print "BKG SHIFT (from SR FIT,",round(4.*bin_width),"GeV) err =",round(err_shift4srup,my_round),",",round(err_shift4srdo,my_round),"%"
print "BKG SHIFT (from SR FIT,",round(3.*bin_width),"GeV) err =",round(err_shift3srup,my_round),",",round(err_shift3srdo,my_round),"%"
print "BKG SHIFT (from SR FIT,",round(2.*bin_width),"GeV) err =",round(err_shift2srup,my_round),",",round(err_shift2srdo,my_round),"%"
print "BKG SHIFT (from SR FIT,",round(1.*bin_width),"GeV) err =",round(err_shift1srup,my_round),",",round(err_shift1srdo,my_round),"%"

